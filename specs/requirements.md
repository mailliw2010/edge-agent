# 项目需求文档

本文档定义了 "Edge Agent" 项目的功能性与非功能性需求。

## 1. 功能性需求

| 模块 | 需求 ID | 需求描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| **核心 Agent** | F001 | Agent 必须能够理解自然语言指令，并将其映射到具体的工具调用。 | 高 |
| | F002 | Agent 必须能够调用工具（如传感器读取、设备控制）并处理其返回结果。 | 高 |
| | F003 | Agent 必须支持多种 LLM 后端，并能通过配置进行切换。 | 中 |
| **API 服务** | F004 | 系统必须提供一个 RESTful API 接口，用于接收用户指令并返回 Agent 的执行结果。 | 高 |
| | F005 | API 必须包含 OpenAPI 规约，以便于客户端集成和测试。 | 高 |
| **工具** | F006 | 必须提供一个工具，用于读取指定设备或所有设备的环境数据。 | 高 |
| | F007 | 必须提供一个工具，用于控制空调的开关和温度。 | 高 |
| | F008 | 必须提供一个工具，用于控制灯光的开关和亮度。 | 高 |

## 2. 非功能性需求

| 类别 | 需求 ID | 需求描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| **性能** | NF001 | API 的平均响应时间应在 3 秒以内。 | 中 |
| **可配置性** | NF002 | 系统的核心行为（如 LLM 提供商、模型名称、API 地址）必须通过环境变量进行配置。 | 高 |
| **可观测性** | NF003 | **生产级日志系统**: 应用程序必须记录详细的运行时日志，以供监控和故障排查。 | 高 |
| | NF004 | **结构化日志**: 在生产环境中，日志必须以 JSON 格式输出，包含时间戳、级别、消息和上下文信息。 | 高 |
| | NF005 | **日志级别控制**: 必须能够通过环境变量动态调整日志的输出级别。 | 高 |
| **部署** | NF006 | 应用程序必须能够被打包成一个独立的 Docker 容器镜像。 | 高 |
| **开发体验** | NF007 | **环境自动加载**: 在本地开发时，系统应能自动从 `.env` 文件加载环境变量，简化启动流程。 | 中 |
